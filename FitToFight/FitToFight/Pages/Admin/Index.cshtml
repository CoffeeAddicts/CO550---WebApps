@page
@model FitToFight.Pages.Admin.IndexModel
@{
}

@*So this will need a view with all the data*@

@{
    #region Home Page
}


<div class="row-lg-11">
    <div class="col-lg-11 mx-auto rounded border p-3 bg-light">
        <div class="row mx-auto" style="margin-top:10px">
            <div class="container">
                <div class="table-wrapper">
                    <div class="row">
                        <div class="col-sm-6">
                            <h2>Home Page Data</h2>
                        </div>
                        <div class="col-sm-6 tableright">
                            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#DataModel" data-bs-type="@IndexModel.Types.HomeDataAdd">
                                Add New Data
                            </button>
                        </div>
                    </div>
                </div>
                <table id="UserTable" name="UserTable" class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th style="width:20%">Header</th>
                            <th style="width:20%">Data</th>
                            <th style="width:20%">ImageUrl</th>
                            <th style="width:20%">Order</th>
                            <th style="width:20%">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var data in Model.ViewModel.HomePage.OrderBy(r => r.Order))
                        {
                            <tr>
                                <td style="width:20%">@data.Header</td>
                                <td style="width:20%">@data.Data</td>
                                <td style="width:20%">@data.ImageUrl</td>
                                <td style="width:20%">@data.Order</td>
                                <td style="width:20%">
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#DataModel" data-bs-id="@data.Id" data-bs-header="@data.Header" data-bs-data="@data.Data" data-bs-imageUrl="@data.ImageUrl" data-bs-order="@data.Order" data-bs-type="@IndexModel.Types.HomeDataEdit">
                                        Edit
                                    </button>
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#DataModelDelete" data-bs-id="@data.Id" data-bs-type="@IndexModel.Types.HomeDataDelete">
                                        Delete
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="clearfix">
                    <div class="hint-text">Showing <b>@Model.ViewModel.HomePage.Count</b> entries</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="DataModel">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="addDataForm" method="post">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add New Home Page Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modal-body">
                    <input asp-for="Type" type="hidden" id="Type" />
                    <input asp-for="InputHomeData.Id" type="hidden" id="id" />
                    <div class="row mb-3">
                        <label class="col-sm-4 col-form-label"> Header </label>
                        <div class="col-sm-8">
                            <input asp-for="InputHomeData.Header" class="form-control" id="header">
                            <span asp-validation-for="InputHomeData.Header" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label class="col-sm-4 col-form-label"> Data</label>
                        <div class="col-sm-8">
                            <input asp-for="InputHomeData.Data" class="form-control" id="data">
                            <span asp-validation-for="InputHomeData.Data" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label class="col-sm-4 col-form-label"> Image Url</label>
                        <div class="col-sm-8">
                            <input asp-for="InputHomeData.ImageUrl" class="form-control" id="imageUrl">
                            <span asp-validation-for="InputHomeData.ImageUrl" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label class="col-sm-4 col-form-label"> Order</label>
                        <div class="col-sm-8">
                            <input asp-for="InputHomeData.Order" class="form-control" id="order">
                            <span asp-validation-for="InputHomeData.Order" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-success" data-bs-sumbit="modal" id="submitButton">Confirm</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="DataModelDelete">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="deleteDataForm" method="post">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modal-body">
                    <input asp-for="Type" type="hidden" id="TypeDelete" />
                    <input asp-for="InputHomeData.Id" type="hidden" id="idDelete" />
                    Are you sure you want to delete this data?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-success" data-bs-sumbit="modal" id="submitButton">Confirm</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div style="height:10px"></div>

@{
    #endregion
}
@{
    #region Users
}

<div class="row-lg-11">
    <div class="col-lg-11 mx-auto rounded border p-3 bg-light">
        <div class="row mx-auto" style="margin-top:10px">
            <div class="container">
                <div class="table-wrapper">
                    <div class="row">
                        <div class="col-sm-6">
                            <h2>Users</h2>
                        </div>
                    </div>
                </div>
                <table id="UserTable" name="UserTable" class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th style="width:20%">Name</th>
                            <th style="width:20%">Email</th>
                            <th style="width:20%">Phone number</th>
                            <th style="width:10%">Admin</th>

                            <th style="width:20%">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var data in Model.ViewModel.Users)
                        {
                            var name = $"{data.FirstName} {data.LastName}";
                            <tr>
                                <td style="width:20%">
                                    @name
                                </td>
                                <td style="width:20%">@data.Email</td>
                                <td style="width:20%">@data.PhoneNumber</td>
                                <td style="width:10%">@data.isAdmin</td>
                                <td style="width:20%">
                                    @* <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#DataModel" data-bs-id="@data.Id" data-bs-header="@data.Header" data-bs-data="@data.Data" data-bs-imageUrl="@data.ImageUrl" data-bs-order="@data.Order" data-bs-type="@IndexModel.Types.HomeDataEdit"> *@
                                    @*        Edit
                                </button> *@
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#UserModalView"
                                            data-bs-id="@data.Id"
                                            data-bs-firstName="@data.FirstName"
                                            data-bs-lastName="@data.LastName"
                                            data-bs-email="@data.Email"
                                            data-bs-phoneNumber="@data.PhoneNumber"
                                            data-bs-dateOfBirth="@data.DateOfBirth"
                                            data-bs-gender="@data.Gender">
                                        View
                                    </button>
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#UserModal" data-bs-id="@data.Id" data-bs-type="@IndexModel.Types.UsersDelete">
                                        Delete
                                    </button>
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#UserModal" data-bs-id="@data.Id" data-bs-type="@IndexModel.Types.UsersAdmin">
                                        Set Admin
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="clearfix">
                    <div class="hint-text">Showing <b>@Model.ViewModel.Users.Count</b> entries</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="UserModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="UserForm" method="post">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalTitle">Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <input asp-for="Type" type="hidden" id="TypeUser" />
                    <input asp-for="InputUser.Id" type="hidden" id="idUser" />
                </div>
                <div class="modal-body" id="modal-body-user">
                    Are you sure you want to delete this data?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-success" data-bs-sumbit="modal" id="userSubmitButton">Confirm</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="UserModalView">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">View User</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modal-body">
                <div class="row mb-3">
                    <label class="col-sm-4 col-form-label"> First Name</label>
                    <div class="col-sm-8">
                        <label id="firstName"></label>
                    </div>
                </div>
                <div class="row mb-3">
                    <label class="col-sm-4 col-form-label"> Last Name</label>
                    <div class="col-sm-8">
                        <label id="lastName"></label>
                    </div>
                </div>
                <div class="row mb-3">
                    <label class="col-sm-4 col-form-label"> Email</label>
                    <div class="col-sm-8">
                        <label id="email"></label>
                    </div>
                </div>
                <div class="row mb-3">
                    <label class="col-sm-4 col-form-label"> Phone Number</label>
                    <div class="col-sm-8">
                        <label id="phoneNumber"></label>
                    </div>
                </div>
                <div class="row mb-3">
                    <label class="col-sm-4 col-form-label"> Date Of Birth</label>
                    <div class="col-sm-8">
                        <label id="dateOfBirth"></label>
                    </div>
                </div>
                <div class="row mb-3">
                    <label class="col-sm-4 col-form-label"> Gender</label>
                    <div class="col-sm-8">
                        <label id="gender"></label>
                        <label id="gender"></label>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div style="height:10px"></div>

@{
    #endregion
}


@{
    #region Classes
}
<div class="row-lg-11">
    <div class="col-lg-11 mx-auto rounded border p-3 bg-light">
        <div class="row mx-auto" style="margin-top:10px">
            <div class="container">
                <div class="table-wrapper">
                    <div class="row">
                        <div class="col-sm-6">
                            <h2>Class Data</h2>
                        </div>
                    </div>
                </div>
                <table id="UserTable" name="UserTable" class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th style="width:20%">Date</th>
                            <th style="width:20%">Class Type</th>
                            <th style="width:20%">Open</th>
                            <th style="width:10%">MaxSize</th>
                            <th style="width:10%">CurrentSize</th>
                            <th style="width:20%">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var data in Model.ViewModel.Classes.Where(r => !r.Past).ToList())
                        {
                            <tr>
                            <td style="width:20%">@data.Date</td>
                                <td style="width:20%">@data.ClassType</td>
                                <td style="width:20%">@data.Open</td>
                                <td style="width:10%">@data.MaxSize</td>
                                <td style="width:10%">@data.CurrentSize</td>
                                <td style="width:20%">
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#DataModel" data-bs-type="@IndexModel.Types.HomeDataEdit">
                                        View
                                    </button>
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#DataModel" data-bs-type="@IndexModel.Types.HomeDataEdit">
                                        Cancel
                                    </button>

                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="clearfix">
                    <div class="hint-text">Showing <b>@Model.ViewModel.Classes.Count</b> entries</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div style="height:10px"></div>

@{
    #endregion
}
@{
    #region Settings
}

<div style="height:10px"></div>


@{
    #endregion
}

<script>


    var DataModel = document.getElementById('DataModel')
    DataModel.addEventListener('show.bs.modal', function (event) {
        var button = event.relatedTarget
        var type = button.getAttribute('data-bs-type')


        if (type == "HomeDataEdit") {
            document.getElementById("id").value = button.getAttribute('data-bs-id')
            document.getElementById("header").value = button.getAttribute('data-bs-header')
            document.getElementById("data").value = button.getAttribute('data-bs-data')
            document.getElementById("imageUrl").value = button.getAttribute('data-bs-imageUrl')
            document.getElementById("order").value = button.getAttribute('data-bs-order')
        }
        document.getElementById("Type").value = type;

    })

    var DataModelDelete = document.getElementById('DataModelDelete')
    DataModelDelete.addEventListener('show.bs.modal', function (event) {
        var button = event.relatedTarget
        var type = button.getAttribute('data-bs-type')

        document.getElementById("idDelete").value = button.getAttribute('data-bs-id')


        document.getElementById("TypeDelete").value = type;
    })

    var UserModalView = document.getElementById('UserModalView')
    UserModalView.addEventListener('show.bs.modal', function (event) {
        var button = event.relatedTarget

        document.getElementById("firstName").innerText = button.getAttribute('data-bs-firstName')
        document.getElementById("lastName").innerText = button.getAttribute('data-bs-lastName')
        document.getElementById("email").innerText = button.getAttribute('data-bs-email')
        document.getElementById("phoneNumber").innerText = button.getAttribute('data-bs-phoneNumber')
        document.getElementById("dateOfBirth").innerText = button.getAttribute('data-bs-dateOfBirth')
        document.getElementById("gender").innerText = button.getAttribute('data-bs-gender')


    })

    var UserModal = document.getElementById('UserModal')
    UserModal.addEventListener('show.bs.modal', function (event) {
        var button = event.relatedTarget

        var type = button.getAttribute('data-bs-type')



        if (type == "UsersDelete") {
            document.getElementById('modal-body-user').innerText = "Are you sure you want to delete this user?"
            document.getElementById('userModalTitle').innerText = "Delete User"
            document.getElementById("userSubmitButton").classList.add("btn-danger")
        }
        else {
            document.getElementById('modal-body-user').innerText = "Are you sure you want to set this user as an admin?"
            document.getElementById('userModalTitle').innerText = "Set Admin"
            document.getElementById("userSubmitButton").classList.add("btn-danger")

        }

        document.getElementById("TypeUser").value = type
        document.getElementById("idUser").value = button.getAttribute('data-bs-id')


    })

</script>
